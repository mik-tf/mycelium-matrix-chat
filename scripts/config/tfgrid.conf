# Mycelium-Matrix Chat - TFGrid Configuration
# Environment-specific overrides for TFGrid deployment

[vm]
name = "myceliumchat"
cpu = 4
memory = 16
disk = 250
node = 6883
enable_mycelium = true
flist = "https://hub.grid.tf/tf-official-vms/ubuntu-24.04-full.flist"
entrypoint = "/sbin/zinit init"

[software]
mycelium_version = "v0.6.1"
rust_version = "stable"
nodejs_version = "20.x"
docker_compose_version = "v2.24.0"
ubuntu_version = "24.04"

[deployment]
repo_url = "https://github.com/mik-tf/mycelium-matrix-chat"
branch = "main"
log_level = "info"
ssh_key_path = "~/.ssh/id_ed25519.pub"
timeout = 1800
retry_attempts = 3
retry_delay = 5
environment = "tfgrid"

[networking]
mycelium_peers = "tcp://188.40.132.242:9651,tcp://185.69.166.7:9651,quic://185.69.166.8:9651"
firewall_allow_ports = "22,80,443,8080,8081,8989,9651"
use_mycelium_networking = true

[security]
deploy_user = "muser"
deploy_user_shell = "/bin/bash"
deploy_user_groups = "sudo,docker"
initial_user = "root"
passwordless_sudo = true

[validation]
health_check_timeout = 30
api_endpoints = "/api/health,/api/v1/bridge/health,/_matrix/federation/v1/version"
service_ports = "8080,8081,8989"
check_mycelium_connectivity = true

[remote]
vm_ready_timeout = 300
vm_ready_check_interval = 10
remote_script_timeout = 1800